# リスクと対策

## 1. Thread 並行による性能改善効果が限定的
**リスク**: Python の GIL により、CPU バウンドな処理が多いと並列化しても速度が上がらない（むしろ遅くなる）可能性がある。
**対策**:
- 設定 (`parallel_enabled`) により即座に並行処理を OFF (逐次実行) に切り替えられるようにする。
- Phase 2 で実測を行い、効果を検証する。

## 2. コスト増 (A/B 両方の計算)
**リスク**: 1リクエストで2回ランキング生成を行うため、計算リソース消費が増加する。DBアセスも倍増する可能性がある。
**対策**:
- Interleaving のサンプリング率を調整し、全体負荷を制御する。
- 将来的には Optimized Interleaving (必要な分だけ計算) へ移行できるよう、インターフェースを設計しておく。

## 3. ログ欠損による評価不能
**リスク**: ログに「どのアイテムが A/B 由来か」が正しく残らないと、勝敗判定ができず実験が無意味になる。
**対策**:
- Phase 1 の必須要件として、`ranking_id` と `source_ranker` のログ出力を実装し、確実にテストする。
